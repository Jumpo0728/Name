<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Java-to-Bedrock Animation Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px 20px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .content {
            padding: 30px 20px;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .upload-area {
            border: 3px dashed #4facfe;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            background: #f8faff;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: #0056b3;
            background: #e6f3ff;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #4facfe;
        }

        .upload-text {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 10px;
        }

        .upload-subtext {
            font-size: 0.9rem;
            color: #999;
        }

        .file-input {
            display: none;
        }

        .convert-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .convert-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .convert-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-section {
            display: none;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        .status-section {
            display: none;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .status-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .download-section {
            display: none;
            text-align: center;
        }

        .download-btn {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(86, 171, 47, 0.3);
        }

        .info-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .info-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-section ul {
            list-style: none;
            padding: 0;
        }

        .info-section li {
            padding: 5px 0;
            color: #666;
            font-size: 0.9rem;
        }

        .info-section li:before {
            content: "‚úì";
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }

        /* Mobile optimizations */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .content {
                padding: 20px 15px;
            }

            .upload-area {
                padding: 30px 15px;
            }

            .upload-icon {
                font-size: 2.5rem;
            }

            .convert-btn, .download-btn {
                padding: 12px;
                font-size: 1rem;
            }
        }

        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4facfe;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Minecraft Animation Converter</h1>
            <p>Convert Java Edition animations to Bedrock format - No installation required!</p>
        </div>

        <div class="content">
            <div class="info-section">
                <h3>How to use (3 simple steps):</h3>
                <ul>
                    <li>1. Upload your Java animation resource pack (ZIP file)</li>
                    <li>2. Click "Convert to Bedrock" and wait for processing</li>
                    <li>3. Download the converted .mcpack file</li>
                    <li>Works on: Phone, Tablet, Desktop - iPhone, Android, iPad</li>
                    <li>100% Browser-based - No software installation needed</li>
                </ul>
            </div>

            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">Tap to select Java animation pack</div>
                    <div class="upload-subtext">ZIP file format required</div>
                    <input type="file" id="fileInput" class="file-input" accept=".zip">
                </div>
                <div id="fileInfo" style="display: none; text-align: center; padding: 10px; background: #e6f3ff; border-radius: 8px; margin-bottom: 15px;">
                    <strong id="fileName"></strong><br>
                    <span id="fileSize"></span>
                </div>
            </div>

            <button class="convert-btn" id="convertBtn" disabled>
                Convert to Bedrock Format
            </button>

            <div class="progress-section" id="progressSection">
                <div class="spinner"></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Processing animations...</div>
            </div>

            <div class="status-section" id="statusSection"></div>

            <div class="download-section" id="downloadSection">
                <button class="download-btn" id="downloadBtn">
                    üì• Download Bedrock Pack
                </button>
            </div>
        </div>

        <div class="footer">
            <p>Made with ‚ù§Ô∏è for the Minecraft community | 100% Browser-based conversion</p>
        </div>
    </div>

    <!-- JSZip library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script>
        // Global variables
        let selectedFile = null;
        let convertedPackBlob = null;

        // Bone name mapping (Java to Bedrock)
        const boneMappings = {
            'head': 'head',
            'body': 'body',
            'leftArm': 'left_arm',
            'rightArm': 'right_arm',
            'leftLeg': 'left_leg',
            'rightLeg': 'right_leg',
            'root': 'root',
            'base': 'base',
            'core': 'core',
            'main': 'main',
            'armorHead': 'armor_stand.head',
            'armorBody': 'armor_stand.body',
            'armorLeftArm': 'armor_stand.left_arm',
            'armorRightArm': 'armor_stand.right_arm',
            'armorLeftLeg': 'armor_stand.left_leg',
            'armorRightLeg': 'armor_stand.right_leg',
            'wing': 'wing',
            'tail': 'tail',
            'body2': 'body2',
            'tail2': 'tail2',
            'fin': 'fin',
            'fin2': 'fin2',
            'saddle': 'saddle',
            'mouth': 'mouth',
            'neck': 'neck',
            'mane': 'mane',
            'tailMain': 'tail_main',
            'tailTip': 'tail_tip',
            'whiskers': 'whiskers',
            'earLeft': 'ear_left',
            'earRight': 'ear_right',
            'carpet': 'carpet',
            'plank': 'plank',
            'bottom': 'bottom',
            'skull': 'skull',
            'head2': 'head2',
            'head3': 'head3',
            'bone': 'bone',
            'spine': 'spine',
            'wingTip': 'wing_tip',
            'cap': 'cap',
            'wingTipLeft': 'wing_tip_left',
            'wingTipRight': 'wing_tip_right',
            'trident': 'trident',
            'bushyTail': 'bushy_tail',
            'tailTip': 'tail_tip',
            'earInnerLeft': 'ear_inner_left',
            'earInnerRight': 'ear_inner_right',
            'stinger': 'stinger',
            'leftHorn': 'left_horn',
            'rightHorn': 'right_horn',
            'tentacle': 'tentacle',
            'tentacle2': 'tentacle2',
            'tentacle3': 'tentacle3',
            'tentacle4': 'tentacle4',
            'tentacle5': 'tentacle5',
            'tentacle6': 'tentacle6',
            'tentacle7': 'tentacle7',
            'tentacle8': 'tentacle8',
            'leftWing': 'left_wing',
            'rightWing': 'right_wing',
            'leftLegFront': 'left_leg_front',
            'rightLegFront': 'right_leg_front',
            'leftLegBack': 'left_leg_back',
            'rightLegBack': 'right_leg_back',
            'throat': 'throat',
            'leg1': 'leg1',
            'leg2': 'leg2',
            'leg3': 'leg3',
            'leg4': 'leg4',
            'tail1': 'tail1',
            'tail2': 'tail2',
            'tail3': 'tail3',
            'nose': 'nose',
            'topSnout': 'top_snout',
            'bottomSnout': 'bottom_snout',
            'jaw': 'jaw',
            'torso': 'torso',
            'leftTendril': 'left_tendril',
            'rightTendril': 'right_tendril',
            'leftTendril2': 'left_tendril2',
            'rightTendril2': 'right_tendril2'
        };

        // Mathematical utilities
        function convertEulerToQuaternion(euler) {
            const [ex, ey, ez] = euler;
            
            const cosX = Math.cos(ex / 2);
            const sinX = Math.sin(ex / 2);
            
            const cosY = Math.cos(ey / 2);
            const sinY = Math.sin(ey / 2);
            
            const cosZ = Math.cos(ez / 2);
            const sinZ = Math.sin(ez / 2);

            const w = cosX * cosY * cosZ + sinX * sinY * sinZ;
            const x = sinX * cosY * cosZ - cosX * sinY * sinZ;
            const y = cosX * sinY * cosZ + sinX * cosY * sinZ;
            const z = cosX * cosY * sinZ - sinX * sinY * sinZ;

            return [x, y, z, w];
        }

        function mapBoneNames(javaBoneName) {
            if (boneMappings[javaBoneName]) {
                return boneMappings[javaBoneName];
            }
            
            // Transform camelCase to snake_case as fallback
            let transformed = javaBoneName
                .replace(/([a-z0-9])([A-Z])/g, '$1_$2')
                .replace(/([A-Z])([A-Z][a-z])/g, '$1_$2')
                .toLowerCase();
            
            return transformed;
        }

        function sanitizeName(filename) {
            return filename
                .replace(/\.json$/i, '')
                .replace(/[^a-zA-Z0-9._-]/g, '_')
                .replace(/^[^a-zA-Z]+/, '')
                .toLowerCase();
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Update progress
        function updateProgress(percent, text) {
            document.getElementById('progressFill').style.width = percent + '%';
            document.getElementById('progressText').textContent = text;
        }

        // Show status message
        function showStatus(message, type = 'success') {
            const statusSection = document.getElementById('statusSection');
            statusSection.className = `status-section status-${type}`;
            statusSection.innerHTML = message;
            statusSection.style.display = 'block';
        }

        // Hide status message
        function hideStatus() {
            document.getElementById('statusSection').style.display = 'none';
        }

        // File upload handling
        function initFileUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');

            uploadArea.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop support
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            });
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            if (!file.name.toLowerCase().endsWith('.zip')) {
                showStatus('Please select a ZIP file containing your Java animation resource pack.', 'error');
                return;
            }

            selectedFile = file;
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = formatFileSize(file.size);
            document.getElementById('fileInfo').style.display = 'block';
            document.getElementById('convertBtn').disabled = false;
            
            hideStatus();
            document.getElementById('downloadSection').style.display = 'none';
        }

        // Main conversion function
        async function convertPack() {
            if (!selectedFile) {
                showStatus('Please select a file first.', 'error');
                return;
            }

            const convertBtn = document.getElementById('convertBtn');
            const progressSection = document.getElementById('progressSection');
            const downloadSection = document.getElementById('downloadSection');

            convertBtn.disabled = true;
            progressSection.style.display = 'block';
            downloadSection.style.display = 'none';
            hideStatus();

            try {
                updateProgress(10, 'Reading ZIP file...');
                
                const zip = new JSZip();
                const zipContent = await zip.loadAsync(selectedFile);
                
                updateProgress(25, 'Scanning for animation files...');
                
                // Find animation files
                const animationFiles = [];
                for (const [filename, file] of Object.entries(zipContent.files)) {
                    if (filename.includes('animations/') && filename.endsWith('.json') && !file.dir) {
                        animationFiles.push({ filename, file });
                    }
                }
                
                if (animationFiles.length === 0) {
                    throw new Error('No animation files found. Make sure your ZIP contains animation JSON files.');
                }
                
                updateProgress(40, `Found ${animationFiles.length} animation file(s)...`);
                
                // Process animations
                const convertedAnimations = [];
                const packName = sanitizeName(selectedFile.name.replace('.zip', ''));
                
                for (let i = 0; i < animationFiles.length; i++) {
                    const { filename, file } = animationFiles[i];
                    updateProgress(40 + (i / animationFiles.length) * 30, `Converting ${filename}...`);
                    
                    try {
                        const animationData = await file.async('text');
                        const javaAnimation = JSON.parse(animationData);
                        
                        const converted = convertJavaAnimation(javaAnimation, filename);
                        if (converted) {
                            convertedAnimations.push(converted);
                        }
                    } catch (error) {
                        console.warn(`Failed to convert ${filename}:`, error.message);
                    }
                }
                
                if (convertedAnimations.length === 0) {
                    throw new Error('No valid animations could be converted.');
                }
                
                updateProgress(80, 'Generating Bedrock pack...');
                
                // Generate Bedrock pack
                const bedrockPack = await generateBedrockPack(convertedAnimations, packName);
                
                updateProgress(100, 'Conversion complete!');
                
                convertedPackBlob = bedrockPack;
                document.getElementById('downloadSection').style.display = 'block';
                
                showStatus(`‚úÖ Successfully converted ${convertedAnimations.length} animation(s) from Java to Bedrock format!`, 'success');
                
            } catch (error) {
                console.error('Conversion error:', error);
                showStatus(`‚ùå Conversion failed: ${error.message}`, 'error');
            } finally {
                document.getElementById('progressSection').style.display = 'none';
                convertBtn.disabled = false;
            }
        }

        function convertJavaAnimation(javaAnimation, filename) {
            if (!javaAnimation.animation) {
                return null;
            }
            
            const animations = javaAnimation.animation;
            const animationEntries = Object.entries(animations);
            
            if (animationEntries.length === 0) {
                return null;
            }
            
            const bedrockAnimations = {};
            let boneCount = 0;
            let maxDuration = 0;

            // Process each animation in the file
            for (const [animName, animData] of animationEntries) {
                if (!animData.bones) {
                    continue;
                }
                
                // Convert each animated bone
                for (const [boneName, boneData] of Object.entries(animData.bones)) {
                    try {
                        const convertedBone = convertBoneAnimation(boneName, boneData);
                        if (convertedBone) {
                            bedrockAnimations[convertedBone.name] = convertedBone.animation;
                            boneCount++;
                            maxDuration = Math.max(maxDuration, convertedBone.duration);
                        }
                    } catch (error) {
                        console.warn(`Failed to convert bone ${boneName}:`, error.message);
                    }
                }
            }

            if (boneCount === 0) {
                return null;
            }

            const animationKeys = Object.keys(bedrockAnimations);
            if (animationKeys.length === 0) {
                return null;
            }
            
            return {
                name: sanitizeName(filename),
                animation: {
                    format_version: "1.10.0",
                    animations: bedrockAnimations
                },
                boneCount,
                duration: maxDuration,
                originalFile: filename
            };
        }

        function convertBoneAnimation(boneName, boneData) {
            if (!boneData.rotation && !boneData.position && !boneData.scale) {
                return null;
            }

            const bedrockBoneName = mapBoneNames(boneName);
            const convertedAnimation = {};
            
            let maxFrameTime = 0;

            // Convert rotation if present
            if (boneData.rotation) {
                const rotationAnimation = convertRotationAnimation(boneData.rotation);
                if (rotationAnimation) {
                    convertedAnimation.rotation = rotationAnimation;
                    maxFrameTime = Math.max(maxFrameTime, rotationAnimation.maxTime || 0);
                }
            }

            // Convert position if present
            if (boneData.position) {
                const positionAnimation = convertPositionAnimation(boneData.position);
                if (positionAnimation) {
                    convertedAnimation.position = positionAnimation;
                    maxFrameTime = Math.max(maxFrameTime, positionAnimation.maxTime || 0);
                }
            }

            // Convert scale if present
            if (boneData.scale) {
                const scaleAnimation = convertScaleAnimation(boneData.scale);
                if (scaleAnimation) {
                    convertedAnimation.scale = scaleAnimation;
                    maxFrameTime = Math.max(maxFrameTime, scaleAnimation.maxTime || 0);
                }
            }

            if (Object.keys(convertedAnimation).length === 0) {
                return null;
            }

            return {
                name: bedrockBoneName,
                animation: convertedAnimation,
                duration: maxFrameTime
            };
        }

        function convertRotationAnimation(rotationData) {
            const timeline = [];
            let maxTime = 0;

            for (const [timeStr, rotation] of Object.entries(rotationData)) {
                const time = parseFloat(timeStr);
                maxTime = Math.max(maxTime, time);

                // Convert Euler angles (degrees) to quaternion
                const radians = rotation.map(deg => deg * Math.PI / 180);
                const quaternion = convertEulerToQuaternion(radians);

                timeline.push({
                    time: time,
                    value: `[${quaternion.map(q => q.toFixed(6)).join(', ')}]`
                });
            }

            if (timeline.length === 0) {
                return null;
            }

            // Sort timeline by time
            timeline.sort((a, b) => a.time - b.time);

            return {
                timeline: timeline,
                maxTime: maxTime
            };
        }

        function convertPositionAnimation(positionData) {
            const timeline = [];
            let maxTime = 0;

            for (const [timeStr, position] of Object.entries(positionData)) {
                const time = parseFloat(timeStr);
                maxTime = Math.max(maxTime, time);

                timeline.push({
                    time: time,
                    value: `[${position.join(', ')}]`
                });
            }

            if (timeline.length === 0) {
                return null;
            }

            timeline.sort((a, b) => a.time - b.time);

            return {
                timeline: timeline,
                maxTime: maxTime
            };
        }

        function convertScaleAnimation(scaleData) {
            const timeline = [];
            let maxTime = 0;

            for (const [timeStr, scale] of Object.entries(scaleData)) {
                const time = parseFloat(timeStr);
                maxTime = Math.max(maxTime, time);

                timeline.push({
                    time: time,
                    value: `[${scale.join(', ')}]`
                });
            }

            if (timeline.length === 0) {
                return null;
            }

            timeline.sort((a, b) => a.time - b.time);

            return {
                timeline: timeline,
                maxTime: maxTime
            };
        }

        async function generateBedrockPack(animations, packName) {
            const zip = new JSZip();
            
            // Create pack structure
            const packFolder = zip.folder(packName);
            
            // Add pack.mcmeta
            const packMcmeta = {
                pack: {
                    pack_format: 7,
                    description: "Converted Java animations for Minecraft Bedrock"
                }
            };
            
            packFolder.file('pack.mcmeta', JSON.stringify(packMcmeta, null, 2));
            
            // Add manifest.json
            const manifest = {
                format_version: [1, 1, 0],
                header: {
                    description: "Converted Java animations for Minecraft Bedrock",
                    name: `${packName} - Bedrock Animations`,
                    uuid: generateUUID(),
                    version: [1, 0, 0],
                    min_engine_version: [1, 2, 0]
                },
                modules: [
                    {
                        description: "Animation module",
                        type: "data",
                        uuid: generateUUID(),
                        version: [1, 0, 0]
                    }
                ],
                dependencies: []
            };
            
            packFolder.file('manifest.json', JSON.stringify(manifest, null, 2));
            
            // Create animations folder
            const animationsFolder = packFolder.folder('animations');
            
            // Add each animation
            for (const animation of animations) {
                const fileName = `${animation.name}.json`;
                animationsFolder.file(fileName, JSON.stringify(animation.animation, null, 2));
            }
            
            // Add animation controllers folder
            const controllersFolder = animationsFolder.folder('controllers');
            const controllerFile = generateAnimationController(animations, packName);
            controllersFolder.file('controller.json', JSON.stringify(controllerFile, null, 2));
            
            // Add documentation
            const docsFolder = packFolder.folder('docs');
            const readme = generateReadme(animations, packName);
            docsFolder.file('README.md', readme);
            
            // Generate the ZIP file
            return await zip.generateAsync({
                type: 'blob',
                compression: 'DEFLATE',
                compressionOptions: {
                    level: 6
                }
            });
        }

        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function generateAnimationController(animations, packName) {
            const animationsMap = {};
            
            for (const animation of animations) {
                animationsMap[animation.name] = `animation.${animation.name}`;
            }
            
            return {
                format_version: "1.10.0",
                animation_controllers: {
                    [`controller.animation.${packName}_main`]: {
                        initial_state: "default",
                        states: {
                            default: {
                                animations: animationsMap,
                                transitions: []
                            }
                        }
                    }
                }
            };
        }

        function generateReadme(animations, packName) {
            let readme = `# ${packName} - Bedrock Animation Pack

## Conversion Information
- **Source**: Minecraft Java Edition
- **Target**: Minecraft Bedrock Edition  
- **Conversion Date**: ${new Date().toLocaleDateString()}
- **Animations Converted**: ${animations.length}

## Installation Instructions

### For Minecraft Bedrock (Windows 10/11, Mobile, Console):
1. Download the .mcpack file
2. Open Minecraft Bedrock Edition
3. Go to Settings > Storage
4. Tap "Import" or "Add Storage"
5. Select the downloaded .mcpack file
6. The animations will be available in your resource packs

## Converted Animations:
`;
            
            for (const animation of animations) {
                readme += `- **${animation.name}** (${animation.boneCount} bones, ${animation.duration.toFixed(1)}s duration)\n`;
            }
            
            readme += `
## Technical Details

### Conversion Process:
1. **Java Animation Parsing**: Extracted animation data from Java resource pack
2. **Bone Mapping**: Converted Java bone names to Bedrock-compatible names
3. **Rotation Conversion**: Transformed Euler angles to quaternions
4. **Timeline Optimization**: Optimized keyframe timing for Bedrock performance

### Supported Animation Properties:
- ‚úÖ Rotation (converted from Euler to quaternion)
- ‚úÖ Position
- ‚úÖ Scale
- ‚úÖ Timeline keyframes

---
*This pack was automatically converted from Java Edition animations using the Mobile Converter Tool.*
`;
            
            return readme;
        }

        // Download function
        function downloadPack() {
            if (!convertedPackBlob) {
                showStatus('No converted pack available for download.', 'error');
                return;
            }

            const url = URL.createObjectURL(convertedPackBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bedrock_animations_${Date.now()}.mcpack`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showStatus('üéâ Pack downloaded successfully! Import it into Minecraft Bedrock to use your animations.', 'success');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            initFileUpload();
            
            document.getElementById('convertBtn').addEventListener('click', convertPack);
            document.getElementById('downloadBtn').addEventListener('click', downloadPack);
        });
    </script>
</body>
</html>